import{e as y,f as A,j as e,B as x,C as F,M as L,i as z,r as u,h as j,O as q,b as T,Q as H,_ as W,L as $}from"./index-D3MpGbMR.js";import{u as G,T as U,a as Q,b,c as Z,f as S,d as _,e as D,g as O,h as J,i as X,E as Y}from"./table-skeleton-DYmyo7_H.js";import{S as ee,a as se,b as te,c as ae,d as re}from"./select-C69YREwq.js";import{C as le,a as ne}from"./chevrons-right-D8c0Dv2j.js";import{D as oe,C as ce,B as R}from"./index-4XN9sFVR.js";import{P as ie,T as de,C as me}from"./trash-DejdLbjq.js";import{I as ue}from"./index-z4fhoOdL.js";import{u as xe}from"./use-debounce-B1vt3ONT.js";import{P as he,a as ge}from"./schema-RXNTGgsM.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=y("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=y("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=y("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);function P({table:s}){const[t,a]=A(),r=Number(t.get("limit"))||15,o=Number(t.get("offset"))||0,d=Number(t.get("pages"))||0,i=(o+r)/r<d?(o+r)/r:null,n=(o-r)/r>=0?(o-r)/r:null,g=o/r+1,c=l=>{a(p=>z(p,{offset:l*r}))};return e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),e.jsxs(ee,{value:`${r}`,onValueChange:l=>{a(`limit=${l}`)},children:[e.jsx(se,{className:"h-8 w-[70px]",children:e.jsx(te,{placeholder:r})}),e.jsx(ae,{side:"top",children:[15,20,30,40,50].map(l=>e.jsx(re,{value:`${l}`,children:l},l))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",g," of ",d]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(x,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>c(0),disabled:n===null||n<0,children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(le,{className:"h-4 w-4"})]}),e.jsxs(x,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>c(n||0),disabled:n===null||n<0,children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(F,{className:"h-4 w-4"})]}),e.jsxs(x,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>c(i||0),disabled:!i,children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(L,{className:"h-4 w-4"})]}),e.jsxs(x,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>c(d-1),disabled:!i,children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(ne,{className:"h-4 w-4"})]})]})]})]})}function Me({columns:s,data:t,pagination:a}){var g;const[r,o]=u.useState([]),[d,i]=u.useState([]),n=G({data:t,columns:s,getCoreRowModel:O(),onSortingChange:o,getSortedRowModel:J(),onColumnFiltersChange:i,getFilteredRowModel:X(),state:{sorting:r,columnFilters:d}});return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs(U,{children:[e.jsx(Q,{className:"bg-muted/50 dark:bg-[#1B2222] border-b-0 h-16",children:n.getHeaderGroups().map(c=>e.jsx(b,{className:"relative",children:c.headers.map(l=>e.jsx(Z,{className:j(l.column.id==="lr"&&"sticky left-0 bg-muted/50 backdrop-blur-sm"),children:l.isPlaceholder?null:S(l.column.columnDef.header,l.getContext())},l.id))},c.id))}),e.jsx(_,{className:"relative",children:(g=n.getRowModel().rows)!=null&&g.length?n.getRowModel().rows.map(c=>e.jsx(b,{className:"group shadow-sm border-b-0","data-state":c.getIsSelected()&&"selected",children:c.getVisibleCells().map(l=>e.jsx(D,{className:j("dark:text-primary/80 group-hover:text-primary",l.id.endsWith("lr")&&"sticky left-0 z-40 bg-background/20 dark:bg-[#1B2222]/20 backdrop-blur"),children:S(l.column.columnDef.cell,l.getContext())},l.id))},c.id)):e.jsx(b,{children:e.jsx(D,{colSpan:s.length,className:"h-64 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(q,{}),"No results."]})})})})]})}),a!==void 0&&a===!0&&e.jsx("div",{className:"mt-5 p-2 py-4 border-t rounded-b-xl",children:e.jsx(P,{table:n})}),a===void 0&&e.jsx("div",{className:"mt-5 p-2 py-4 border-t rounded-b-xl",children:e.jsx(P,{table:n})})]})}function be({consignment:s}){const t=T(),a=()=>{t(`/consignments/${s.lr}`)};return e.jsxs("div",{className:"group-hover:opacity-100 opacity-0 flex gap-2 duration-100 transition-opacity mr-2",children:[e.jsx(x,{onClick:a,variant:"ghost",size:"sm",children:e.jsx(ie,{size:12,strokeWidth:2})}),e.jsx(oe,{consignmentName:s.lr,lrNumber:s.lr,children:e.jsx(x,{size:"sm",variant:"ghost",children:e.jsx(de,{className:"stroke-rose-500",size:16,strokeWidth:2})})})]})}const ye={quantity:he("Quantity",4),weight:ge("Weight",5)},M=({initialData:s,currentField:t})=>{const a=`${s[t]}`||"",r=ye[t],[o,d]=u.useState(!1),[i,n]=u.useState(a),[g,c]=u.useState(a),[l,p]=u.useState(),[V,N]=u.useState(!1),[v,w]=u.useState(!1),C=xe(i,500),[E]=H();u.useEffect(()=>{o&&(c(i),p(void 0),w(!1))},[o]);const K=async h=>{try{N(!0);const f=await E({id:s==null?void 0:s.lr,values:h}).unwrap()}catch(f){console.log(f),W.error("Something went wrong")}finally{N(!1)}};u.useEffect(()=>{v&&K({...s,[t]:C})},[C,t,v]);const B=h=>{var k;c(h);const f=r.safeParse(h);if(f.success)p(void 0),n(h),w(!0);else{const I=f.error.flatten();p((k=I.formErrors)==null?void 0:k[0])}};return e.jsxs("div",{className:"flex flex-col items-center justify-center w-24",children:[!o&&e.jsx("button",{className:j("w-20 py-2",V&&"animate-pulse text-blue-500"),onClick:()=>d(!0),children:t==="quantity"?i:parseFloat(i).toFixed(2)}),o&&e.jsxs(e.Fragment,{children:[e.jsx(ue,{placeholder:"0",className:"w-24",type:"number",value:g,autoFocus:!0,onChange:h=>{B(h.target.value)},onBlur:()=>d(!1)}),e.jsx("p",{className:"text-xs text-red-500",children:l})]})]})},Te=[{accessorKey:"lr",header:({column:s})=>e.jsx(m,{column:s,title:"LR #"}),cell:({row:s,table:t})=>{const a=s.getValue("lr"),r=s.original.mode;return e.jsx($,{to:`/consignments/${a}`,children:e.jsxs("p",{className:"group-hover:text-blue-500 font-medium text-primary/90 transition-colors flex items-center justify-between gap-2 ml-2",children:["#",a,r.toLowerCase()==="forward"?e.jsx("span",{className:"flex text-xs font-medium h-5 w-6 rounded-full capitalize font-sans text-amber-600 dark:text-amber-300  bg-amber-100/50 dark:bg-amber-100/20 items-center justify-center",children:"f"}):e.jsx("span",{className:"flex text-xs font-medium h-5 w-6 rounded-full capitalize font-sans text-fuchsia-500 dark:text-purple-400  bg-purple-100/20 dark:bg-fuchsia-100/20  items-center justify-center",children:"r"})]})})}},{accessorKey:"status",header:({column:s})=>e.jsx(m,{column:s,title:"Status"}),cell:({row:s,table:t})=>{const a=s.getValue("status");return e.jsx(ce,{status:a})}},{accessorKey:"lrDate",header:({column:s})=>e.jsx(m,{column:s,title:"LR Date"})},{accessorKey:"deliveryDate",header:({column:s})=>e.jsx(m,{column:s,title:"Delivery Date"})},{accessorKey:"expectedDeliveryDate",header:({column:s})=>e.jsx(m,{column:s,title:"Expected Delivery Date",wrap:!0}),cell:({row:s,cell:t})=>{const a=s.getValue("expectedDeliveryDate"),r=s.original.deliveryDate,o=r?new Date(r).setHours(0,0,0,0):void 0,d=new Date(a).setHours(0,0,0,0),i=new Date().setHours(0,0,0,0);let n="text-orange-500";return o?o>d?n="text-rose-500":n="text-sky-500":(i>d&&(n="text-rose-500"),i<d&&(n="text-green-500")),e.jsxs("p",{className:j("font-medium flex items-center justify-center",n),children:[a," "]})}},{accessorKey:"consigneeName",header:({column:s})=>e.jsx(m,{column:s,title:"Sender"}),cell:({row:s,table:t,cell:a})=>e.jsx("p",{className:"",children:s.getValue("consigneeName")})},{accessorKey:"consignerName",header:({column:s})=>e.jsx(m,{column:s,title:"Reciever"})},{accessorKey:"vendorName",header:({column:s})=>e.jsx(m,{column:s,title:"Channel Partner",wrap:!0})},{accessorKey:"quantity",header:({column:s})=>e.jsx(m,{column:s,title:"Qty"}),cell:({row:s})=>e.jsx(M,{initialData:s.original,currentField:"quantity"})},{accessorKey:"weight",header:({column:s})=>e.jsx(m,{column:s,title:"Weight (KG)"}),cell:({row:s})=>e.jsx(M,{initialData:s.original,currentField:"weight"})},{accessorKey:"delayed",header:"Delayed/Notified",cell:({row:s,cell:t})=>{const a=s.original.notified,r=s.original.delayed;return e.jsxs("div",{className:"space-2 justify-center flex flex-wrap gap-2",children:[r&&e.jsx(R,{className:"text-yellow-400 bg-background border-2 border-amber-200 dark:border-amber-200/40",variant:"secondary",children:"delayed"}),a&&e.jsx(R,{className:"text-teal-500 border-teal-400 dark:border-teal-700 border-2 bg-background",variant:"secondary",children:"notified"})]})}},{id:"actions",header:()=>e.jsx(Y,{size:15,className:"ml-5"}),cell:({row:s,table:t})=>e.jsx(be,{consignment:s.original})},{accessorKey:"padding",header:"",cell:()=>e.jsx("div",{className:"py-5"})}],m=({title:s,column:t,wrap:a})=>e.jsxs(x,{variant:"ghost",onClick:()=>t.toggleSorting(t.getIsSorted()==="asc"),children:[a?e.jsx("p",{className:"w-24 text-wrap text-center",children:s}):s,t.getIsSorted()==="asc"&&e.jsx(je,{className:"ml-2 h-4 w-4"}),t.getIsSorted()==="desc"&&e.jsx(pe,{className:"ml-2 h-4 w-4"}),!t.getIsSorted()&&e.jsx(fe,{className:"ml-2 h-3 w-3"})]}),Ve=({})=>{const s=T(),t=()=>s("/consignments/add");return e.jsxs(x,{onClick:t,size:"sm",variant:"orange",children:[e.jsx(me,{size:15,className:"mr-2"})," Add Consignment"]})};export{Ve as A,Me as D,Te as c};
