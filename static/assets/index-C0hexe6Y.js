import{W as v,j as e,B as x,aI as R,ae as T,u as C,a3 as F,an as M,d as w,r as g,b as j,ao as z,aJ as D,A as E,E as B,F as A,aK as G,G as K,H}from"./index-DVk1_3TA.js";import{C as W,F as $,Q as I}from"./query-search-DCVo4ZT0.js";import{P as L,j as Q,E as V,u as _,T as J,a as O,b as u,c as X,f as p,d as q,e as f,g as U,h as Y,i as Z,C as ee,D as se}from"./table-skeleton-C5WlC17f.js";import{S as ae,a as te,b as le,c as re,d as ne}from"./select-BJ66us1z.js";import{C as ie,a as ce}from"./chevrons-right-CimoMIJB.js";function oe({channelPartner:t}){const n=v(),i=()=>{n(`/channel-partners/${t.id}`)};return e.jsxs("div",{className:"group-hover:opacity-100 opacity-0 flex gap-2 transition-opacity",children:[e.jsx(x,{onClick:i,variant:"outline",size:"sm",children:e.jsx(L,{size:12,strokeWidth:2})}),e.jsx(R,{name:t.name,id:t.id,children:e.jsx(x,{size:"sm",variant:"outline",children:e.jsx(Q,{className:"stroke-rose-500",size:16,strokeWidth:2})})})]})}const N=[{accessorKey:"name",id:"name",header:"Name",cell:({cell:t,row:n})=>{const i=t.getValue(),s=n.original.id;return e.jsx(T,{to:`/channel-partners/${s}`,children:e.jsx("p",{className:"group-hover:text-blue-500 font-medium text-primary/90 transition-colors flex items-center justify-between gap-2 ml-2",children:i})})}},{accessorKey:"address",header:"Address"},{accessorKey:"odaCharge",header:"ODA Charge"},{accessorKey:"fixedCharge",header:"Fixed Charge"},{accessorKey:"miscCharge",header:"Misc. Charge"},{id:"actions",header:()=>e.jsx(V,{size:15,className:""}),cell:({row:t,table:n})=>e.jsx(oe,{channelPartner:t.original})}];function b({table:t}){const[n,i]=C(),s=Number(n.get("limit"))||15,o=Number(n.get("offset"))||0,a=Number(n.get("pages"))||0,h=(o+s)/s<a?(o+s)/s:null,c=(o-s)/s>=0?(o-s)/s:null,d=o/s+1;console.log(c);const m=l=>{i(r=>w(r,{offset:l*s}))};return e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),e.jsxs(ae,{value:`${s}`,onValueChange:l=>{i(`limit=${l}`)},children:[e.jsx(te,{className:"h-8 w-[70px]",children:e.jsx(le,{placeholder:s})}),e.jsx(re,{side:"top",children:[15,20,30,40,50].map(l=>e.jsx(ne,{value:`${l}`,children:l},l))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",d," of ",a]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(x,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>m(0),disabled:c===null||c<0,children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(ie,{className:"h-4 w-4"})]}),e.jsxs(x,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>m(c||0),disabled:c===null||c<0,children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(F,{className:"h-4 w-4"})]}),e.jsxs(x,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>m(h||0),disabled:!h,children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(M,{className:"h-4 w-4"})]}),e.jsxs(x,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>m(a-1),disabled:!h,children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(ce,{className:"h-4 w-4"})]})]})]})]})}function de({columns:t,data:n,pagination:i,stickyIndex:s}){var m;const[o,a]=g.useState([]),[h,c]=g.useState([]),d=_({data:n,columns:t,getCoreRowModel:U(),onSortingChange:a,getSortedRowModel:Y(),onColumnFiltersChange:c,getFilteredRowModel:Z(),state:{sorting:o,columnFilters:h}});return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs(J,{children:[e.jsx(O,{className:"bg-muted/50 dark:bg-[#1B2222] border-b-0 h-16",children:d.getHeaderGroups().map(l=>e.jsx(u,{className:"relative",children:l.headers.map(r=>e.jsx(X,{className:j(s&&r.column.id===t[0].id&&"sticky text-left left-0 lg:pl-5  bg-muted/50 backdrop-blur-sm"),children:r.isPlaceholder?null:p(r.column.columnDef.header,r.getContext())},r.id))},l.id))}),e.jsx(q,{className:"relative",children:(m=d.getRowModel().rows)!=null&&m.length?d.getRowModel().rows.map(l=>e.jsx(u,{className:"group shadow-sm border-b-0","data-state":l.getIsSelected()&&"selected",children:l.getVisibleCells().map(r=>e.jsx(f,{className:j("dark:text-primary/80 group-hover:text-primary",s&&r.id.endsWith(t[0].id||"")&&"sticky left-0 z-40 bg-background/20 dark:bg-[#1B2222]/20 backdrop-blur"),children:p(r.column.columnDef.cell,r.getContext())},r.id))},l.id)):e.jsx(u,{children:e.jsx(f,{colSpan:t.length,className:"h-64 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(z,{}),"No results."]})})})})]})}),i!==void 0&&i===!0&&e.jsx("div",{className:"mt-5 p-2 py-4 border-t rounded-b-xl",children:e.jsx(b,{table:d})}),i===void 0&&e.jsx("div",{className:"mt-5 p-2 py-4 border-t rounded-b-xl",children:e.jsx(b,{table:d})})]})}const me=({})=>e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-5 text-center z-50 bg-background/20 dark:bg-secondary/90 backdrop-blur-sm",children:[e.jsx(W,{className:"w-10 h-10 stroke-rose-500",strokeWidth:1}),e.jsxs("h3",{className:"text-xl font-medium text-rose-500",children:["Error fetching channel partners",e.jsx("p",{className:"text-sm text-primary/80",children:"Something went wrong."})]})]}),xe=({label:t,path:n})=>{const i=v(),s=()=>i(n);return e.jsxs(x,{onClick:s,size:"sm",variant:"orange",className:"capitalize",children:[e.jsx(ee,{size:15,className:"mr-2"})," ",t]})},fe=({})=>{const[t,n]=C(),i=t.get("limit")||"15",s=t.get("offset")||"0",o=t.get("search"),{data:a,isLoading:h,isFetching:c,isError:d,isSuccess:m}=D({limit:i,offset:s,search:o}),l=a==null?void 0:a.data.results;return g.useEffect(()=>{if(a!=null&&a.data&&a.data.limit){const{limit:r,total_results:y,offset:k}=a.data,P=Math.floor(y/r)+1;n(S=>w(S,{pages:P,limit:r,offset:k}))}},[a]),e.jsxs("div",{className:"relative h-full px-2 md:px-8 mx-auto py-4 space-y-4",children:[d&&e.jsx(me,{}),e.jsxs("header",{className:"flex flex-col gap-5 md:flex-row w-full md:items-center md:justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{size:"sm",variant:"outline",children:[e.jsx($,{size:15,className:"mr-2 stroke-[#FF6700]"})," Import"]}),e.jsx(xe,{label:"Add Channel Partner",path:"/channel-partners/add"})]})]}),e.jsx("main",{className:"w-full h-full",children:e.jsxs(E,{className:"dark:bg-[#121717]",children:[e.jsxs(B,{className:"flex md:flex-row gap-5 md:justify-between ",children:[e.jsxs("div",{children:[e.jsxs(A,{className:"flex gap-2 items-center text-lg",children:[e.jsx(G,{className:"h-5 w-5 stroke-orange-500"}),"Channel Partners"]}),e.jsxs(K,{children:["Manage channel partners.",(a==null?void 0:a.data)&&a.data.total_results>0&&e.jsxs("span",{className:" ml-2",children:[e.jsx("span",{className:"font-semibold",children:a.data.total_results})," ","results found."]})]})]}),e.jsx("div",{className:"flex-1 flex flex-col gap-3 max-w-sm",children:e.jsx(I,{placeholder:"Search channel partner"})})]}),e.jsx(H,{className:"relative p-0",children:h||c?e.jsx(se,{columns:N}):e.jsx(de,{columns:N,data:l||[],stickyIndex:!0})})]})})]})};export{fe as default};
