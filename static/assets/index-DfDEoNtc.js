import{c as F,u as x,r as d,a as ie,j as e,B as b,b as j,d as p,e as de,f as ue,$ as q,g as O,h as fe,i as me,k as he,_ as y,l as z,m as Q,n as xe,o as M,p as pe,q as be,C as je,D as ge,s as ve,t as $e,v as E,w,x as k,y as C,z as S,A as P,E as ye,F as we,P as Ne}from"./index-D023Ew-Q.js";import{B as ke,C as X}from"./index-lV-nIdEi.js";import{C as Ce,a as Se,b as Pe,c as Fe,d as De}from"./alert-dialog-BTaYzCtj.js";import{A as Re,c as V,D as Ee}from"./add-consignment-btn-D32xetpl.js";import{D as Me}from"./table-skeleton-Bx_1x19y.js";import{C as _e,X as N,F as ze,Q as Ae}from"./query-search-CAmZchd5.js";import{S as Ge,a as Te,b as Ve,c as Be,d as Ie,$ as Le}from"./select-B-I5N_nw.js";import{C as qe,D as Oe,a as Qe,f as H,S as Xe}from"./consignment-status-DAKHLlIM.js";import{L as B}from"./label-BZi7ENat.js";import"./skeleton-CBNpdAoq.js";import"./input-Do_bMhuR.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=F("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=F("FilterX",[["path",{d:"M13.013 3H2l8 9.46V19l4 2v-8.54l.9-1.055",key:"1fi1da"}],["path",{d:"m22 3-5 5",key:"12jva0"}],["path",{d:"m17 3 5 5",key:"k36vhe"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=F("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=F("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),We=["all","in-transit","reached","out-for-delivery","delivered"],Ye=({})=>{const[s,l]=x(),[t,r]=d.useState("all");d.useEffect(()=>{r(s.get("status")||"all")},[s.get("status")]);const{data:a}=ie(),n=c=>{r(c),l(c==="all"?i=>p(i,{status:null,offset:0}):i=>p(i,{status:c,offset:0}))};return e.jsx("div",{className:"dark:bg-background/40 bg-muted shadow-sm w-fit p-1 rounded-lg hidden md:flex gap-2",children:We.map((c,i)=>e.jsxs(b,{onClick:()=>n(c),size:"sm",variant:c===t?"primary":"ghost",className:j("capitalize text-xs font-normal h-6"),children:[c,e.jsx(ke,{variant:"secondary",className:j("ml-2 text-primary/50 rounded-full px-2 py-0",c===t&&"font-bold"),children:a==null?void 0:a.data[c]})]},c+i))})},Je=({})=>e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-5 text-center z-50 bg-background/20 dark:bg-secondary/90 backdrop-blur-sm",children:[e.jsx(_e,{className:"w-10 h-10 stroke-rose-500",strokeWidth:1}),e.jsxs("h3",{className:"text-xl font-medium text-rose-500",children:["Error fetching consignments",e.jsx("p",{className:"text-sm text-primary/80",children:"Something went wrong."})]})]}),D=({name:s,value:l,onReset:t})=>e.jsxs("div",{className:j("flex relative items-center justify-between h-9 rounded-lg my-5","shadow-sm bg-gray-300/10 border border-input max-w-fit"),children:[e.jsxs("p",{className:"text-xs text-muted-foreground ml-4 capitalize",children:[s,": "]}),e.jsx("p",{className:"text-xs text-primary/80 font-semibold mx-2",children:l}),e.jsx(b,{type:"button",onClick:t,size:"sm",variant:"ghost",className:"rounded-lg",children:e.jsx(N,{className:"w-4 h-4"})})]}),Ze=({})=>{var i;const[s,l]=x(),t=s.get("channelPartner"),r=o=>{l(u=>p(u,o))};function a(){r({channelPartner:null,offset:0})}const{data:n}=de(),c=(n==null?void 0:n.data)||[];return t?e.jsx(D,{name:"channel partner",value:((i=c.filter(o=>`${o.id}`===t)[0])==null?void 0:i.name)||"",onReset:a}):null},es=({})=>{const[s,l]=x(),[t,r]=d.useState(),a=s.get("channelPartner");d.useEffect(()=>{r(a||void 0)},[a]);const n=o=>{l(u=>p(u,o))},c=o=>{r(o),o&&n({channelPartner:o,offset:0})};function i(){n({channelPartner:null,offset:0}),r(void 0)}return e.jsxs("div",{className:j("flex relative items-center justify-between gap-1 h-9 rounded-lg max-w-sm  w-full"),children:[e.jsx(qe,{onChange:c,value:t||"",placeholder:"Channel Partner"}),t&&e.jsx(b,{type:"button",onClick:i,size:"icon",variant:"ghost",className:"rounded-lg",children:e.jsx(N,{className:"w-4 h-4"})})]})},ss=({})=>{var i;const[s,l]=x(),t=s.get("distributor"),r=o=>{l(u=>p(u,o))};function a(){r({distributor:null,offset:0})}const{data:n}=ue({limit:null,offset:null,search:null}),c=(n==null?void 0:n.data.results)||[];return t?e.jsx(D,{name:"distributor",value:((i=c.filter(o=>`${o.id}`===t)[0])==null?void 0:i.name)||"",onReset:a}):null},ts=({})=>{const[s,l]=x(),[t,r]=d.useState(),a=s.get("distributor");d.useEffect(()=>{r(a||void 0)},[a]);const n=o=>{l(u=>p(u,o))},c=o=>{r(o),o&&n({distributor:o,offset:0})};function i(){n({distributor:null,offset:0}),r(void 0)}return e.jsxs("div",{className:j("flex relative items-center justify-between gap-1 h-9 rounded-lg max-w-sm  w-full"),children:[e.jsx(Oe,{onChange:c,value:t||"",placeholder:"Distributor"}),t&&e.jsx(b,{type:"button",onClick:i,size:"icon",variant:"ghost",className:"rounded-lg",children:e.jsx(N,{className:"w-4 h-4"})})]})},I=({queryKey:s})=>{const[l,t]=x(),[r,a]=d.useState(),n=l.get(s);d.useEffect(()=>{a(n?new Date(n):void 0)},[n]);const c=u=>{t(h=>p(h,u))},i=u=>{a(u),u&&c({[s]:H(u,"yyyy-MM-dd"),offset:0})};function o(){c({[s]:null,offset:0}),a(void 0)}return e.jsxs("div",{className:"flex relative items-center max-w-sm w-full",children:[e.jsx(Qe,{onChange:i,value:r,placeholder:s.replace("Date","")}),e.jsx(b,{onClick:o,className:j("absolute opacity-0 -z-10 right-0 transition-opacity",r&&"opacity-100 z-20"),size:"icon",variant:"ghost",children:e.jsx(N,{size:15})})]})},L=({queryKey:s})=>{const[l,t]=x(),[r,a]=d.useState(),n=l.get(s);d.useEffect(()=>{a(n?new Date(n):void 0)},[n]);const c=o=>{t(u=>p(u,o))};function i(){c({[s]:null,offset:0}),a(void 0)}return r?e.jsxs("div",{className:"flex relative items-center w-fit my-5",children:[e.jsx("div",{className:"absolute w-full h-full bg-gray-300/10 z-10"}),e.jsxs(b,{variant:"outline",className:j("w-full justify-start pr-10 text-left text-xs font-normal"),children:[e.jsx(He,{className:"mr-2 h-4 w-4",strokeWidth:1.2}),s.replace("Date",""),":",e.jsx("span",{className:"font-bold ml-2",children:H(r,"PPP")})]}),e.jsx(b,{onClick:i,className:j("absolute opacity-0 -z-10 right-1 transition-opacity rounded-md px-2",r&&"opacity-100 z-20"),size:"sm",variant:"ghost",children:e.jsx(N,{size:15})})]}):null},as=["forward","reverse"],rs=({onChange:s,value:l})=>e.jsxs(Ge,{onValueChange:s,value:l,children:[e.jsx(Te,{className:"w-full capitalize",children:e.jsx(Ve,{placeholder:"Select Mode"})}),e.jsx(Be,{children:as.map(t=>e.jsx(Ie,{className:"capitalize",value:t,children:t},t))})]}),ns=({})=>{const[s,l]=x(),[t,r]=d.useState(),a="mode",n=s.get(a);d.useEffect(()=>{r(n||void 0)},[n]);const c=u=>{l(h=>p(h,u))},i=u=>{r(u),u&&c({[a]:u,offset:0})};function o(){c({[a]:null,offset:0}),r(void 0)}return e.jsxs("div",{className:j("flex relative items-center justify-between h-9 rounded-lg max-w-xs  w-full"),children:[e.jsx(rs,{onChange:i,value:t||""}),t&&e.jsx(b,{type:"button",onClick:o,size:"sm",variant:"ghost",className:"rounded-lg",children:e.jsx(N,{className:"w-4 h-4"})})]})},os=({})=>{const[s,l]=x(),[t,r]=d.useState(),a="status",n=s.get(a);d.useEffect(()=>{r(n||"")},[n]);const c=u=>{l(h=>p(h,u))},i=u=>{r(u),u&&c({[a]:u,offset:0})};function o(){c({[a]:null,offset:0}),r(void 0)}return e.jsxs("div",{className:j("flex relative items-center justify-between h-9 rounded-lg max-w-xs  w-full"),children:[e.jsx(Xe,{onChange:i,value:t||""}),t&&e.jsx(b,{type:"button",onClick:o,size:"sm",variant:"ghost",className:"rounded-lg",children:e.jsx(N,{className:"w-4 h-4"})})]})},cs=({})=>{const[s,l]=x(),t="status",r=s.get(t),a=c=>{l(i=>p(i,c))};function n(){a({[t]:null,offset:0})}if(r)return e.jsx(D,{name:t,value:e.jsx(X,{status:r}),onReset:n})},U="Radio",[ls,W]=q(U),[is,ds]=ls(U),us=d.forwardRef((s,l)=>{const{__scopeRadio:t,name:r,checked:a=!1,required:n,disabled:c,value:i="on",onCheck:o,...u}=s,[h,g]=d.useState(null),f=Q(l,$=>g($)),m=d.useRef(!1),v=h?!!h.closest("form"):!0;return d.createElement(is,{scope:t,checked:a,disabled:c},d.createElement(z.button,y({type:"button",role:"radio","aria-checked":a,"data-state":Y(a),"data-disabled":c?"":void 0,disabled:c,value:i},u,{ref:f,onClick:M(s.onClick,$=>{a||o==null||o(),v&&(m.current=$.isPropagationStopped(),m.current||$.stopPropagation())})})),v&&d.createElement(hs,{control:h,bubbles:!m.current,name:r,value:i,checked:a,required:n,disabled:c,style:{transform:"translateX(-100%)"}}))}),fs="RadioIndicator",ms=d.forwardRef((s,l)=>{const{__scopeRadio:t,forceMount:r,...a}=s,n=ds(fs,t);return d.createElement(pe,{present:r||n.checked},d.createElement(z.span,y({"data-state":Y(n.checked),"data-disabled":n.disabled?"":void 0},a,{ref:l})))}),hs=s=>{const{control:l,checked:t,bubbles:r=!0,...a}=s,n=d.useRef(null),c=Le(t),i=be(l);return d.useEffect(()=>{const o=n.current,u=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(u,"checked").set;if(c!==t&&g){const f=new Event("click",{bubbles:r});g.call(o,t),o.dispatchEvent(f)}},[c,t,r]),d.createElement("input",y({type:"radio","aria-hidden":!0,defaultChecked:t},a,{tabIndex:-1,ref:n,style:{...s.style,...i,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function Y(s){return s?"checked":"unchecked"}const xs=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],J="RadioGroup",[ps,qs]=q(J,[O,W]),Z=O(),ee=W(),[bs,js]=ps(J),gs=d.forwardRef((s,l)=>{const{__scopeRadioGroup:t,name:r,defaultValue:a,value:n,required:c=!1,disabled:i=!1,orientation:o,dir:u,loop:h=!0,onValueChange:g,...f}=s,m=Z(t),v=fe(u),[$,R]=me({prop:n,defaultProp:a,onChange:g});return d.createElement(bs,{scope:t,name:r,required:c,disabled:i,value:$,onValueChange:R},d.createElement(he,y({asChild:!0},m,{orientation:o,dir:v,loop:h}),d.createElement(z.div,y({role:"radiogroup","aria-required":c,"aria-orientation":o,"data-disabled":i?"":void 0,dir:v},f,{ref:l}))))}),vs="RadioGroupItem",$s=d.forwardRef((s,l)=>{const{__scopeRadioGroup:t,disabled:r,...a}=s,n=js(vs,t),c=n.disabled||r,i=Z(t),o=ee(t),u=d.useRef(null),h=Q(l,u),g=n.value===a.value,f=d.useRef(!1);return d.useEffect(()=>{const m=$=>{xs.includes($.key)&&(f.current=!0)},v=()=>f.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",v),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",v)}},[]),d.createElement(xe,y({asChild:!0},i,{focusable:!c,active:g}),d.createElement(us,y({disabled:c,required:n.required,checked:g},o,a,{name:n.name,ref:h,onCheck:()=>n.onValueChange(a.value),onKeyDown:M(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:M(a.onFocus,()=>{var m;f.current&&((m=u.current)===null||m===void 0||m.click())})})))}),ys=d.forwardRef((s,l)=>{const{__scopeRadioGroup:t,...r}=s,a=ee(t);return d.createElement(ms,y({},a,r,{ref:l}))}),se=gs,te=$s,ws=ys,ae=d.forwardRef(({className:s,...l},t)=>e.jsx(se,{className:j("grid gap-2",s),...l,ref:t}));ae.displayName=se.displayName;const _=d.forwardRef(({className:s,...l},t)=>e.jsx(te,{ref:t,className:j("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s),...l,children:e.jsx(ws,{className:"flex items-center justify-center",children:e.jsx(je,{className:"h-3.5 w-3.5 fill-primary"})})}));_.displayName=te.displayName;const Ns=["passed","failed"],ks=({})=>{const[s,l]=x(),[t,r]=d.useState(),a="tatStatus",n=s.get(a);d.useEffect(()=>{r(n||"")},[n]);const c=o=>{l(u=>p(u,o))},i=o=>{r(o),c({[a]:o,offset:0})};return e.jsx("div",{children:e.jsxs(ae,{value:t,onValueChange:i,className:"w-full max-w-sm gap-0",children:[e.jsxs(B,{className:"flex gap-4 items-center cursor-pointer opacity-60 hover:bg-gray-500/10 p-2 rounded-md",children:[e.jsx(_,{className:"capitalize",value:""}),"All"]}),Ns.map(o=>e.jsxs(B,{className:"flex gap-4 items-center cursor-pointer hover:bg-gray-500/10 p-2 rounded-md",children:[e.jsx(_,{className:"capitalize",value:o},o),o]}))]})})},Cs=({name:s,placeholder:l})=>{const[t,r]=x(),a=t.get(s),n=i=>{r(o=>p(o,i))};function c(){n({[s]:null,offset:0})}if(a)return e.jsx(D,{name:l||s,value:a,onReset:c})},Ss=[{label:"TAT Status",name:"tatStatus"},{label:"Mode",name:"mode"}],Ps=({})=>{const[s]=x(),l=Array.from(s.entries()).length;return e.jsxs("div",{className:"flex gap-3 flex-wrap items-center px-5",children:[l>3&&e.jsx(K,{className:"w-5 h-5 stroke-gray-300 mr-2 my-5"}),e.jsx(L,{queryKey:"fromDate"}),e.jsx(L,{queryKey:"toDate"}),e.jsx(ss,{}),e.jsx(Ze,{}),e.jsx(cs,{}),Ss.map(t=>e.jsx(Cs,{name:t.name,placeholder:t.label}))]})},Fs=({})=>{const[s,l]=x(),t=()=>{l(r=>p(r,{tatStatus:"",fromDate:"",toDate:"",distributor:"",channelPartner:"",status:"",mode:null,offset:0}))};return e.jsxs(b,{size:"sm",className:"w-full justify-between  hover:bg-red-500/10 text-red-500 hover:text-red-400",variant:"ghost",onClick:t,children:["Clear All ",e.jsx(Ke,{size:14})]})},Ds=({children:s})=>e.jsxs(ge,{children:[e.jsx(ve,{asChild:!0,children:s}),e.jsxs($e,{sideOffset:10,className:"min-w-[250px]",children:[e.jsxs(E,{className:"flex gap-2 items-center",children:[e.jsx(K,{className:"w-4 h-4"}),"Filters"]}),e.jsx(w,{}),e.jsxs(k,{children:[e.jsx(C,{children:"Date"}),e.jsx(S,{children:e.jsxs(P,{className:"w-72",children:[e.jsx(E,{children:"Date Range"}),e.jsx(w,{className:""}),e.jsxs("div",{className:"p-2 space-y-2",children:[e.jsx("p",{className:"text-xs font-medium",children:"From"}),e.jsx(I,{queryKey:"fromDate"})]}),e.jsx(w,{className:"mt-2"}),e.jsxs("div",{className:"p-2 pb-4 space-y-2",children:[e.jsx("p",{className:"text-xs font-medium",children:"To"}),e.jsx(I,{queryKey:"toDate"})]})]})})]},"date-filter-menu"),e.jsxs(k,{children:[e.jsx(C,{children:"Distributor and CP"}),e.jsx(S,{children:e.jsx(P,{className:"h-[500px] p-0 w-72 bg-transparent border-none shadow-none",children:e.jsxs("div",{className:"bg-background pb-5 p-1 w-72 rounded-md border border-input shadow-sm",children:[e.jsxs("div",{className:"p-2 space-y-2 ",children:[e.jsx("p",{className:"text-xs font-medium",children:"Distributor"}),e.jsx(ts,{})]}),e.jsx(w,{}),e.jsxs("div",{className:"px-2 space-y-2",children:[e.jsx("p",{className:"text-xs font-medium mt-2",children:"Channel Partner"}),e.jsx(es,{})]})]})})})]},"distributor-filter-menu"),e.jsxs(k,{children:[e.jsx(C,{children:"status and mode"}),e.jsx(S,{children:e.jsxs(P,{className:"w-72",children:[e.jsxs("div",{className:"p-2 space-y-2",children:[e.jsx("p",{className:"text-xs font-medium",children:"Status"}),e.jsx(os,{})]}),e.jsx(w,{}),e.jsxs("div",{className:"px-2 pb-4 space-y-2",children:[e.jsx("p",{className:"text-xs font-medium",children:"Mode"}),e.jsx(ns,{})]})]})})]},"status-filter-menu"),e.jsxs(k,{children:[e.jsx(C,{children:"Turn Around Time"}),e.jsx(S,{children:e.jsxs(P,{className:"p-2 w-72",children:[e.jsx(E,{children:"TAT"}),e.jsx(w,{}),e.jsx(ks,{})]})})]},"tat-filter-menu"),e.jsx(w,{}),e.jsx(ye,{asChild:!0,children:e.jsx(Fs,{})})]})]});function Rs(){var A,G;const[s,l]=x(),t=s.get("status"),r=s.get("limit")||"15",a=s.get("offset")||"0",n=s.get("mode"),c=s.get("fromDate"),i=s.get("toDate"),o=s.get("distributor"),u=s.get("channelPartner"),h=s.get("search"),g=s.get("tatStatus"),{data:f,isLoading:m,isFetching:v,isError:$,isSuccess:R}=we({status:t,limit:r,offset:a,mode:n,fromDate:c,toDate:i,channelPartner:u,distributor:o,search:h,tatStatus:g}),re=(A=f==null?void 0:f.data)==null?void 0:A.results;return d.useEffect(()=>{if(f!=null&&f.data&&f.data.limit){const{limit:T,total_results:ne,offset:oe}=f.data,ce=Math.floor(ne/T)+1;l(le=>p(le,{pages:ce,limit:T,offset:oe}))}},[f]),{consignments:re,total_results:((G=f==null?void 0:f.data)==null?void 0:G.total_results)||0,data:f,isLoading:m,isFetching:v,isError:$,isSuccess:R}}const Os=({})=>{const[s,l]=x(),t=s.get("status"),{consignments:r,data:a,total_results:n,isError:c,isLoading:i,isFetching:o,isSuccess:u}=Rs();return e.jsxs("div",{className:"relative h-full  px-2 md:px-8 mx-auto py-4 space-y-4",children:[c&&e.jsx(Je,{}),e.jsxs("header",{className:"flex flex-col gap-5 md:flex-row w-full md:items-center md:justify-between",children:[e.jsx(Ye,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ds,{children:e.jsxs(b,{size:"sm",variant:"outline",children:[e.jsx(Ue,{size:15,className:"mr-2 stroke-[#FF6700]"})," ","Filter"]})}),e.jsxs(b,{size:"sm",variant:"outline",children:[e.jsx(ze,{size:15,className:"mr-2 stroke-[#FF6700]"})," Import"]}),e.jsx(Re,{})]})]}),e.jsx("main",{className:"w-full h-full",children:e.jsxs(Ce,{className:"dark:bg-[#121717] flex-1",children:[e.jsxs(Se,{className:"flex md:flex-row gap-5 md:justify-between border-b",children:[e.jsxs("div",{children:[e.jsxs(Pe,{className:"flex gap-2 items-center text-lg",children:[e.jsx(Ne,{className:"h-5 w-5 stroke-orange-500"}),"Consignments"," ",t&&e.jsx(X,{status:t})]}),e.jsxs(Fe,{children:["Manage your consignments.",n>0&&e.jsxs("span",{className:" ml-2",children:[e.jsx("span",{className:"font-semibold",children:n})," ","results found."]})]})]}),e.jsx("div",{className:"flex-1 flex items-center gap-3  max-w-sm",children:e.jsx(Ae,{placeholder:"Search LR #"})})]}),e.jsx(Ps,{}),e.jsx(De,{className:"relative p-0",children:i||o?e.jsx(Me,{columns:V}):e.jsx(Ee,{columns:V,data:r||[]})})]})})]})};export{Os as default};
