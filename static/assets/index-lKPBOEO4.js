import{b as N,j as e,B as x,L as D,f as v,Y as P,A as R,q as T,Z as M,i as w,r as g,h as f,O as E,l as F}from"./index-D3MpGbMR.js";import{C as A,a as z,b as B,c as I,d as K}from"./index-z4fhoOdL.js";import{E as G,F as L,Q as _}from"./error-state-BWwSu8xR.js";import{D as $,S as H}from"./delete-modal-BZG89K8v.js";import{P as Q,T as V,C as W}from"./trash-DejdLbjq.js";import{E as q,u as O,T as Y,a as Z,b as u,c as J,f as j,d as U,e as p,g as X,h as ee,i as se,D as ae}from"./table-skeleton-DYmyo7_H.js";import{S as te,a as re,b as le,c as ie,d as oe}from"./select-C69YREwq.js";import"./alert-dialog-CM4UmgTj.js";import"./skeleton-BySlzUNx.js";function ne({distributor:t}){const l=N(),i=()=>{l(`/distributors/${t.id}`)};return e.jsxs("div",{className:"group-hover:opacity-100 opacity-0 flex gap-2 transition-opacity",children:[e.jsx(x,{onClick:i,variant:"outline",size:"sm",children:e.jsx(Q,{size:12,strokeWidth:2})}),e.jsx($,{name:t.name,id:t.id,children:e.jsx(x,{size:"sm",variant:"outline",children:e.jsx(V,{className:"stroke-rose-500",size:16,strokeWidth:2})})})]})}const b=[{accessorKey:"name",header:"Name",cell:({cell:t,row:l})=>{const i=t.getValue(),a=l.original.id;return e.jsx(D,{to:`/distributors/${a}`,children:e.jsx("p",{className:"group-hover:text-blue-500 font-medium text-primary/90 transition-colors flex items-center justify-between gap-2 ml-2",children:i})})}},{accessorKey:"destination",header:"Destination"},{accessorKey:"rate",header:"Rate"},{accessorKey:"tat",header:"Turn Around Time"},{accessorKey:"odaCharge",header:"ODA Charge"},{accessorKey:"address",header:"Address"},{accessorKey:"state",header:"State"},{id:"actions",header:()=>e.jsx(q,{size:15,className:""}),cell:({row:t,table:l})=>e.jsx(ne,{distributor:t.original})}];function ce({table:t}){const[l,i]=v(),a=Number(l.get("limit"))||15,d=Number(l.get("offset"))||0,s=Number(l.get("pages"))||0,n=(d+a)/a<s?(d+a)/a:null,o=(d-a)/a>=0?(d-a)/a:null,c=d/a+1;console.log(o);const r=m=>{i(h=>w(h,{offset:m*a}))};return e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),e.jsxs(te,{value:`${a}`,onValueChange:m=>{i(`limit=${m}`)},children:[e.jsx(re,{className:"h-8 w-[70px]",children:e.jsx(le,{placeholder:a})}),e.jsx(ie,{side:"top",children:[15,20,30,40,50].map(m=>e.jsx(oe,{value:`${m}`,children:m},m))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",c," of ",s]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(x,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>r(0),disabled:o===null||o<0,children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(P,{className:"h-4 w-4"})]}),e.jsxs(x,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>r(o||0),disabled:o===null||o<0,children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(R,{className:"h-4 w-4"})]}),e.jsxs(x,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>r(n||0),disabled:!n,children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(T,{className:"h-4 w-4"})]}),e.jsxs(x,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>r(s-1),disabled:!n,children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(M,{className:"h-4 w-4"})]})]})]})]})}function de({columns:t,data:l}){var o;const[i,a]=g.useState([]),[d,s]=g.useState([]),n=O({data:l,columns:t,getCoreRowModel:X(),onSortingChange:a,getSortedRowModel:ee(),onColumnFiltersChange:s,getFilteredRowModel:se(),state:{sorting:i,columnFilters:d}});return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"max-w-full overflow-x-auto",children:e.jsxs(Y,{children:[e.jsx(Z,{className:"bg-muted/50 dark:bg-[#1B2222] border-b-0 h-16",children:n.getHeaderGroups().map(c=>e.jsx(u,{className:"relative",children:c.headers.map(r=>e.jsx(J,{className:f("",r.column.id==="lr"&&"sticky left-0 bg-muted/50 backdrop-blur-sm"),children:r.isPlaceholder?null:j(r.column.columnDef.header,r.getContext())},r.id))},c.id))}),e.jsx(U,{className:"relative",children:(o=n.getRowModel().rows)!=null&&o.length?n.getRowModel().rows.map(c=>e.jsx(u,{className:"group shadow-sm border-b-0","data-state":c.getIsSelected()&&"selected",children:c.getVisibleCells().map(r=>e.jsx(p,{className:f("dark:text-primary/80 group-hover:text-primary ",r.id.endsWith("name")&&"sticky left-0 z-40 bg-background/20 dark:bg-[#1B2222]/20 backdrop-blur"),children:j(r.column.columnDef.cell,r.getContext())},r.id))},c.id)):e.jsx(u,{children:e.jsx(p,{colSpan:t.length,className:"h-64 text-center",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx(E,{}),"No results."]})})})})]})}),e.jsx("div",{className:"mt-5 p-2 py-4 border-t rounded-b-xl",children:e.jsx(ce,{table:n})})]})}const me=({})=>{const t=N(),l=()=>t("/distributors/add");return e.jsxs(x,{onClick:l,size:"sm",variant:"orange",children:[e.jsx(W,{size:15,className:"mr-2"})," Add Distributor"]})},ve=({})=>{const[t,l]=v(),i=t.get("limit")||"15",a=t.get("offset")||"0",d=t.get("search"),{data:s,isLoading:n,isFetching:o,isError:c,isSuccess:r}=F({limit:i,offset:a,search:d}),m=s==null?void 0:s.data.results;return g.useEffect(()=>{if(s!=null&&s.data&&s.data.limit){const{limit:h,total_results:y,offset:C}=s.data,S=Math.floor(y/h)+1;l(k=>w(k,{pages:S,limit:h,offset:C}))}},[s]),e.jsxs("div",{className:"relative h-full px-2 md:px-8 mx-auto py-4 space-y-4",children:[c&&e.jsx(G,{message:"Error fetching Distributors"}),e.jsxs("header",{className:"flex flex-col gap-5 md:flex-row w-full md:items-center md:justify-between",children:[e.jsx("div",{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{size:"sm",variant:"outline",children:[e.jsx(L,{size:15,className:"mr-2 stroke-[#FF6700]"})," Import"]}),e.jsx(me,{})]})]}),e.jsx("main",{className:"w-full h-full",children:e.jsxs(A,{className:"dark:bg-[#121717]",children:[e.jsxs(z,{className:"flex md:flex-row gap-5 md:justify-between",children:[e.jsxs("div",{children:[e.jsxs(B,{className:"flex gap-2 items-center text-lg",children:[e.jsx(H,{className:"h-5 w-5 stroke-orange-500"}),"Distributors"]}),e.jsx(I,{children:"Manage your distributors."}),(s==null?void 0:s.data)&&s.data.total_results>0&&e.jsxs("p",{className:"text-xs font-normal mt-5",children:["Showing"," ",s.data.total_results>Number(i)?i:s.data.total_results," ","of ",s.data.total_results," results"]})]}),e.jsxs("div",{className:"flex-1 flex flex-col gap-3 max-w-sm",children:[e.jsx("div",{className:"flex gap-2 "}),e.jsx(_,{placeholder:"Search distributor name"})]})]}),e.jsx(K,{className:"relative p-0",children:n||o?e.jsx(ae,{columns:b}):e.jsx(de,{columns:b,data:m||[]})})]})})]})};export{ve as default};
